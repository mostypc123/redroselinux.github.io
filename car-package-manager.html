<!DOCTYPE html>
<html>
<head>
  <style>
body {
  margin: 2em;
  padding: 50px
}

section {
  margin-top: 4em;
  padding: 1em 0;
}

pre, code {
  background-color: rgb(24, 24, 24);
  color: rgb(230, 230, 230);
  font-family: monospace;
  border: 1px solid rgb(60, 60, 60);
  padding: 0.8em;
  display: block;
  overflow-x: auto;
  white-space: pre;
}
  </style>
  <meta charset="UTF-8">
  <title>Car Package Manager — Redrose Linux</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<header class="navbar" id="navbar">
  <img src="assets/redrose-logo-transparent.png" height="40" width="40" alt="Redrose Linux logo">
  <p>
    Redrose Linux 
    <a href="./docs.html" style="color:rgb(255,60,60)">Docs</a>
    <a href="https://github.com/redroselinux/" style="color:rgb(255,60,60)">GitHub</a>
    <a href=".waitlist" style="color:rgb(255,60,60)">Waitlist</a>
  </p>
</header>

<section>
  <h1>Car Package Manager</h1>
  <p>Car is the official package manager for Redrose Linux.</p>

  <h2>Getting Started</h2>
  <p>Initialize Car before using it:</p>
  <pre><code>car init</code></pre>
  <p>This creates Car’s configuration directory and required files.</p>

  <p>Update the package list regularly to keep your system synced with mirrors:</p>
  <pre><code>car updatelist</code></pre>
  <p>Running this every few days ensures you always have the latest package information.</p>

  <p>Installed packages are tracked at:</p>
  <pre><code>~/.config/repro.car</code></pre>

  <h2>Basic Commands</h2>
  <pre><code>car get &lt;package&gt; [--noconfirm]
car delete &lt;package&gt;
car update &lt;package&gt;
car search &lt;package&gt;
car updatelist
car init
</code></pre>

  <ul>
    <li><code>car get &lt;package&gt;</code> — Installs a package.</li>
    <li><code>car delete &lt;package&gt;</code> — Removes a package.</li>
    <li><code>car update &lt;package&gt;</code> — <i>Currently not supported</i></li>
    <li><code>car search &lt;package&gt;</code> — Searches mirrors for available packages.</li>
    <li><code>car updatelist</code> — Updates your local package list.</li>
    <li><code>car init</code> — Initializes configuration directories and hooks.</li>
  </ul>

  <h2>Reinstalling Packages</h2>
  <p>Car reinstalls only when updates are available.  
  To force reinstall a package manually, run:</p>
  <pre><code>sudo car delete &lt;package&gt;
sudo car get &lt;package&gt;
</code></pre>

  <h2>Autocorrection</h2>
  <p>Car can correct typos in package names. If a requested name doesn’t match exactly, Car installs the closest known match.</p>
  <pre><code>redrose% car get firfox
Note: Using firefox instead of firfox
</code></pre>

  <h2>Hooks</h2>
  <p>Hooks allow automatic actions after installation.  
  To create one:</p>
  <ol>
    <li>Add a file to <code>~/.config/car/post-inst-hooks</code>.</li>
    <li>Define a <code>run(package)</code> function inside that file.</li>
  </ol>

  <h2>Repositories</h2>
  <p>Repository definitions are stored in <code>~/.config/mirrors.car</code>.</p>
  <pre><code>:base:
install_script = https://raw.githubusercontent.com/crust-project/car-binary-storage/main/
packagelist = https://raw.githubusercontent.com/crust-project/car/main/existing-packages.txt
:end:
</code></pre>

  <p>Each repository requires:</p>
  <ul>
    <li>A package list (text file, one package per line).</li>
    <li>A directory containing package installation scripts.</li>
  </ul>

  <p>Example package list:</p>
  <pre><code>package1
package2
package3
</code></pre>

  <p>Car supports URLs and local paths (using <code>file://</code>), so you can create local repositories.</p>

  <h3>Example Repository Layout</h3>
  <pre><code>my-repo/
  my-package/
    install_script
    index.html
</code></pre>

  <h2>Creating Packages</h2>
  <p>Each package must have an <code>install_script</code>. Example:</p>
  <pre><code>version = "0.0.1"

def beforeinst():
    print("Runs before installation")

def deps():
    print(":: No dependencies required")

def build():
    print(":: No build required")

def install():
    pass

def postinst():
    pass
</code></pre>

  <ul>
    <li><code>beforeinst()</code> — Runs before installation.</li>
    <li><code>deps()</code> — Handles dependencies.</li>
    <li><code>build()</code> — Builds the package if needed.</li>
    <li><code>install()</code> — Installs package files.</li>
    <li><code>postinst()</code> — Executes after installation finishes.</li>
  </ul>

  <h2>Submitting Packages</h2>
  <ol>
    <li>Fork <code>car-binary-storage</code> on GitHub.</li>
    <li>Create a new directory for your package and add your <code>install_script</code>.</li>
    <li>Follow naming conventions (<code>-bin</code>, <code>-git</code>, <code>-stable</code>).</li>
    <li>Submit a pull request.</li>
  </ol>
 <p><a href="docs.html" style="color:rgb(255,60,60)">← Back to Docs Home</a></p>
</section>

<center>
  <p>Our documentation is open source. You can help by contributing.</p>
  <button onclick="window.open('https://github.com/redroselinux/redroselinux.github.io', '_blank')">Contribute</button>
</center>

</body>
</html>

